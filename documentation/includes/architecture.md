# Architecture
The API is a three-tier architecture, consisting of the following layers:
- Controller Layer
- Service Layer
- Data Access Layer (Repository Layer)

## Controller Layer
The controller layer is responsible for handling incoming HTTP requests and returning the appropriate HTTP responses. 
It is the entry point for all incoming requests and is responsible for routing requests to the appropriate service layer methods.

## Service Layer
The service layer contains the business logic of the application. 
It is responsible for processing data, applying business rules, and interacting with the data access layer to retrieve or update data.

## Data Access Layer
Automatically generated by TypeORM, the data access layer is responsible for interacting with the database.


# Folder Structure
The project is structured as follows:
- `src/core`: Contains core functionality, e.g. global filters, interceptors, base classes or helpers.
- `src/modules`: Contains feature modules, each with its own controller, service, and data access layers and DTOs (and filters). Feature modules are further described below.
- `src/typeorm`: Contains TypeORM configuration
- `src/assets`: TBD. Possibly to use for configuration files or static files like images.

## Feature Modules
Feature modules are organized by domain (e.g. Vliegtuigen, Types) and contain the following subfolders:
- `controller`: Contains the controller class for this entity.
- `DTO`: Contains Data Transfer Objects (DTOs) for this entity. Usually the DTO is a GetObjectsFilterDTO
- `entities`": Usually contains two entities: one for the database table and the other for the view.
- `service`: Contains the service class for this entity. 
   The service class must inherit from the `IHeliosService` and provide the Entity type and EntityView type as generic parameters.
   It also injects the correct repositories. If required you can extend or override methods from the base service class in this service, without affecting other services.

In the root folder of the feature module, you will find the `module.ts` file, which contains the module definition for this feature module.
**Make sure you register your TypeORM entities in the `TypeOrmModule.forFeature` method of the module definition.**

### GetObjectsFilterDTO
The GetObjectsFilterDTO is a class that contains properties that can be used to filter the results of a GET GetObjects request.
It contains a builder method that can be used to create a find options object, which is then used by TypeORM to select the correct objects from the database. (WHERE clause)
A GetObjectsFilterDTO is Generic, meaning you need to supply the Entity type which will be filtered by this filter dto.
This allows for type safety and intellisense support, e.g. if your Entity does not have a property `name`, you will get a compile-time error when you try to build a filter for it.

### Generating Feature Modules
In the root of the project, you will find a script called `create-modules.js`. This script can be used to generate a skeleton of new feature modules.
To use the script, run `node create-modules.js` and follow the instructions in the terminal.  
**Make sure to import the new feature-module in the root `app.module.ts` file!**

