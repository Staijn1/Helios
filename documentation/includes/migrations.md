# Database Migrations
Database migrations are a controlled way to make database changes without manually having to execute `ALTER TABLE` statements, or `DROP COLUMN` commands. 
These commands can be automatically generated by TypeORM based on the entities defined in the source-code.  
This system is inspired by Entity Framework in C#.  

 
# Code-first database design
In Entity Framework there is a concept of code-first database design, where you model your tables and columns using classes.  
These classes are then automatically mapped to tables and columns, with constraints and foreign keys.  
Whenever your entity classes change in the sourcecode, you should generate a migration in order to make sure your database will be in the same state.  

A migration file will contain an up() and down() method. The up() is called whenever a migration is applied to your database.  
The down() is called when reverting a migration and should therefore undo the changes made in the up()


# Migration Commandsgr
- `npm run migration:generate --name=...`
  TypeORM will compare the entities in your sourcecode **to your current local database**. Any changes detected will be put in the migration file.  
  **Make sure to check the generated SQL to make sure no data is lost when it will be executed and database will be logical!**. In case the SQL is incorrect, you probably have something wrong in your entities!
- `npm run migration:create`
  Creates an empty migration step for you to write custom SQL in. This can be useful for data-fixes in the initial database seed data
- `npm run migration:run`
  TypeORM will check your configured database which migration was last ran (migrations table keeps history) and runs all migrations since then to apply them on your database.
- `npm run migration:revert`
  Undo a migration